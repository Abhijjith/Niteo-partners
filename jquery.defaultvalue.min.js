;(function(window, document, $, undefined) {

	$.fn.defaultvalue = function() {

		// cache selected inputs
		var elements = this;

		return(
			elements.each(function() {

				// cache input and his related label
				var el = $(this),
					lbl = el.prev("label");

				// only necessary if placeholder is not available
				if (!Modernizr.input.placeholder) {
					lbl.addClass("defaultvalue");

					// when focusing the input, turn the label into off mode
					// when leaving focus of the input, turn the label back on
					el.focus(function() {
						lbl.removeClass("defaultvalue-on").addClass("defaultvalue-off");
					}).blur(function() {
						if (el.val() === "" || el.val() == lbl.attr("placeholder")) {
							lbl.removeClass("defaultvalue-off").addClass("defaultvalue-on");
						}
					});

					lbl.click(function(e) {
						e.preventDefault();

						lbl.removeClass("defaultvalue-on").addClass("defaultvalue-off");
						lbl.next("input, textarea").focus();
					});

					if (el.val() === "" || el.val() == lbl.attr("placeholder")) {
						el.val("");
						lbl.removeClass("defaultvalue-off").addClass("defaultvalue-on");
					}

				}

			})
		);

	};

}(window, document, jQuery));